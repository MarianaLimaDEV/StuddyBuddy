import{s as re,g as xe,a as Ze,r as Je}from"./pwa-M1Oyof3P.js";const pe={intro:"/sfx/INTRO.mp3",open:"/sfx/OPEN.mp3",close:"/sfx/CLOSE.mp3",click:"/sfx/CLICK.mp3",interact:"/sfx/INTERACT.mp3",notification:"/sfx/NOTIFICATION.mp3",alarm:"/sfx/ALARM.mp3",reset:"/sfx/RESET.mp3",task_add:"/sfx/CLICK.mp3",task_delete:"/sfx/CLOSE.mp3",task_toggle:"/sfx/CLICK.mp3",mute_toggle:"/sfx/CLICK.mp3",login:"/sfx/OPEN.mp3",countdown_stop:"/sfx/RESET.mp3",timezone_add:"/sfx/OPEN.mp3",timezone_remove:"/sfx/CLOSE.mp3"},ie=new Map;let L=!0,Te=!1;const fe="soundMuted";try{localStorage.getItem(fe)==="true"&&(L=!1)}catch{}function J(){if(Te)return;const e=new Audio("data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=");e.volume=.01,e.play().then(()=>{Te=!0,console.info("üîä Audio context unlocked"),e.pause()}).catch(o=>{console.warn("Could not unlock audio context:",o)})}document.addEventListener("click",J,{once:!0});document.addEventListener("keydown",J,{once:!0});document.addEventListener("touchstart",J,{once:!0});function et(e){if(ie.has(e))return;const o=pe[e];if(!o){console.warn(`Sound "${e}" not found in sound mappings`);return}const t=new Audio(o);t.preload="auto",t.volume=.7,t.addEventListener("error",n=>{console.error(`‚ùå Failed to load sound "${e}" from "${o}":`,n),console.error("‚ùå Error details:",{code:t.error?.code,message:t.error?.message,MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4})}),t.addEventListener("canplaythrough",()=>{}),t.addEventListener("loadstart",()=>{}),ie.set(e,t)}function tt(){Object.keys(pe).forEach(e=>{et(e)})}function Et(){tt(),console.info("üîä Sound manager initialized"),J()}function E(e,{overlap:o=!1}={}){if(!L)return;const t=pe[e];if(!t){console.warn(`Sound "${e}" not configured`);return}const n=ie.get(e);if(n)if(o){const a=n.cloneNode();a.volume=n.volume||.7,a.play().then(()=>{}).catch(r=>{console.error(`Failed to play sound "${e}":`,r),ne(e,t)})}else n.currentTime=0,n.volume=n.volume||.7,n.play().then(()=>console.debug(`Playing sound "${e}"`)).catch(a=>{console.error(`Failed to play sound "${e}":`,a),ne(e,t)});else ne(e,t)}function ne(e,o){try{const t=new Audio(o);t.volume=.7,t.play().then(()=>{}).catch(n=>console.error(`Fallback play failed for "${e}":`,n))}catch(t){console.error(`Could not create audio for "${e}":`,t)}}function bt(e){E(e,{overlap:!0})}function At(){L=!L,console.info(`Sound ${L?"enabled":"disabled"}`);try{localStorage.setItem(fe,String(!L))}catch{}return!L}function St(){return!L}function kt(e){L=!e;try{localStorage.setItem(fe,String(e))}catch{}}const Me="lang";let Z=null;const ot={skipLink:{pt:"Saltar para o conte√∫do principal",en:"Skip to main content"},sidebarAria:{pt:"Estat√≠sticas e modo foco",en:"Stats and focus mode"},sidebarTabAria:{pt:"Abrir painel lateral",en:"Open side panel"},focusMode:{pt:"Modo foco",en:"Focus mode"},focusModeAria:{pt:"Ativar modo foco",en:"Activate focus mode"},focusModeExit:{pt:"Sair modo foco",en:"Exit focus mode"},focusModeExitAria:{pt:"Sair do modo foco",en:"Exit focus mode"},navAria:{pt:"Menu principal",en:"Main menu"},logoAria:{pt:"StuddyBuddy - P√°gina inicial",en:"StuddyBuddy - Home"},principal:{pt:"Principal",en:"Home"},principalText:{pt:"Bem-vindo ao StuddyBuddy! Acede √†s ferramentas clicando nos bot√µes abaixo: Pomodoro, Timer, Cron√≥metro, Task List, Countdown e World Clock. Podes abrir v√°rias ao mesmo tempo e arrast√°-las no ecr√£. Usa o modo foco para esconder a navega√ß√£o e concentrares-te no estudo.",en:"Welcome to StuddyBuddy! Access the tools by clicking the buttons below: Pomodoro, Timer, Stopwatch, Task List, Countdown and World Clock. You can open several at once and drag them on screen. Use focus mode to hide navigation and focus on studying."},sobre:{pt:"Sobre",en:"About"},sobreText:{pt:"O StuddyBuddy √© uma plataforma de estudo com ferramentas pr√°ticas: Pomodoro para sess√µes de foco, Timer, Cron√≥metro, lista de tarefas, contagem regressiva e rel√≥gio mundial. Faz login para sincronizar o teu tema e prefer√™ncias na nuvem.",en:"StuddyBuddy is a study platform with practical tools: Pomodoro for focus sessions, Timer, Stopwatch, task list, countdown and world clock. Log in to sync your theme and preferences in the cloud."},servicos:{pt:"Servi√ßos",en:"Services"},servicosText:{pt:"Pomodoro (trabalho/pausa), Timer personaliz√°vel, Cron√≥metro com voltas, Task List com backend, Countdown para datas importantes e World Clock com v√°rios fusos. Todas as ferramentas funcionam offline e podem ser instaladas como app (PWA).",en:"Pomodoro (work/break), customizable Timer, Stopwatch with laps, Task List with backend, Countdown for important dates and World Clock with multiple timezones. All tools work offline and can be installed as an app (PWA)."},configuracoes:{pt:"Configura√ß√µes",en:"Settings"},appLabel:{pt:"App",en:"App"},appInstall:{pt:"Instalar",en:"Install"},appInstallAria:{pt:"Instalar a app",en:"Install the app"},appDownload:{pt:"Download",en:"Download"},appDownloadAria:{pt:"Baixar / instalar a app",en:"Download / install the app"},appInstallHint:{pt:"Clica em ‚ÄúDownload‚Äù para ver as op√ß√µes de instala√ß√£o. No iOS: ‚ÄúPartilhar‚Äù ‚Üí ‚ÄúAdicionar ao ecr√£ principal‚Äù.",en:"Click ‚ÄúDownload‚Äù to see install options. On iOS: ‚ÄúShare‚Äù ‚Üí ‚ÄúAdd to Home Screen‚Äù."},appInstallReady:{pt:"Instala√ß√£o dispon√≠vel neste browser.",en:"Install is available in this browser."},appAlreadyInstalled:{pt:"A app j√° est√° instalada.",en:"The app is already installed."},appInstalledBtn:{pt:"Instalada",en:"Installed"},appInstalled:{pt:"App instalada com sucesso.",en:"App installed successfully."},appInstallDismissed:{pt:"Instala√ß√£o cancelada.",en:"Install dismissed."},appInstallIosHint:{pt:"No iPhone/iPad: toca em ‚ÄúPartilhar‚Äù ‚Üí ‚ÄúAdicionar ao ecr√£ principal‚Äù.",en:"On iPhone/iPad: tap ‚ÄúShare‚Äù ‚Üí ‚ÄúAdd to Home Screen‚Äù."},appInstallDesktopHint:{pt:"Para instalar: abre no Chrome/Edge e usa ‚ÄúInstalar app‚Äù no menu/barra de endere√ßo.",en:"To install: open in Chrome/Edge and use ‚ÄúInstall app‚Äù from the menu/address bar."},tema:{pt:"Tema",en:"Theme"},som:{pt:"Som",en:"Sound"},soundAria:{pt:"Ativar/desativar som",en:"Toggle sound"},faq:{pt:"FAQ",en:"FAQ"},faqAria:{pt:"Perguntas frequentes",en:"Frequently asked questions"},faq1Q:{pt:"Como fa√ßo login?",en:"How do I log in?"},faq1A:{pt:"Abre o menu <strong>Login</strong>, escreve o teu email e password, e confirma. Se ainda n√£o existir conta, o sistema cria automaticamente (exemplo fict√≠cio).",en:"Open the <strong>Login</strong> menu, enter your email and password, and confirm. If no account exists yet, the system creates one automatically (fictional example)."},faq2Q:{pt:"Como alterar o tema (claro/escuro)?",en:"How do I change the theme (light/dark)?"},faq2A:{pt:"Vai em <strong>Configura√ß√µes</strong> e muda o <strong>Tema</strong>. Ao estar conectado, o tema √© guardado para a pr√≥xima vez (texto fict√≠cio).",en:"Go to <strong>Settings</strong> and change the <strong>Theme</strong>. When connected, the theme is saved for next time (fictional text)."},faq3Q:{pt:"Como ativar/desativar o som?",en:"How do I enable/disable sound?"},faq3A:{pt:"Em <strong>Configura√ß√µes</strong>, clica no bot√£o de <strong>Som</strong>. Exemplo: ao desativar, o √≠cone muda e o estado fica guardado.",en:"In <strong>Settings</strong>, click the <strong>Sound</strong> button. Example: when disabled, the icon changes and the state is saved."},faq4Q:{pt:"Os meus dados ficam guardados?",en:"Is my data saved?"},faq4A:{pt:"Sim: as <strong>configura√ß√µes</strong> ficam associadas ao teu email (texto fict√≠cio). As ferramentas podem ter comportamentos diferentes dependendo do m√≥dulo.",en:"Yes: <strong>settings</strong> are associated with your email (fictional text). Tools may behave differently depending on the module."},faq5Q:{pt:"Posso abrir v√°rias ferramentas ao mesmo tempo?",en:"Can I open several tools at once?"},faq5A:{pt:"Sim. Podes abrir mais do que um card e organizar no ecr√£. Exemplo fict√≠cio: Pomodoro + TaskList lado a lado.",en:"Yes. You can open more than one card and arrange them on screen. Fictional example: Pomodoro + TaskList side by side."},faq6Q:{pt:"Perdi a password. E agora?",en:"I forgot my password. What now?"},faq6A:{pt:"Exemplo fict√≠cio: clica em <strong>Forgot password?</strong> e segue as instru√ß√µes. (Ainda pode ser uma funcionalidade futura.)",en:"Fictional example: click <strong>Forgot password?</strong> and follow the instructions. (May be a future feature.)"},shortcutsBtn:{pt:"‚å®Ô∏è Atalhos",en:"‚å®Ô∏è Shortcuts"},shortcutsAria:{pt:"Ver atalhos de teclado",en:"View keyboard shortcuts"},contacto:{pt:"Contacto",en:"Contact"},contactoText:{pt:"Entre em contacto!",en:"Get in touch!"},login:{pt:"Login",en:"Login"},navToggleAria:{pt:"Alternar menu de navega√ß√£o",en:"Toggle navigation menu"},dropdownClose:{pt:"Fechar",en:"Close"},pomodoro:{pt:"Pomodoro",en:"Pomodoro"},timer:{pt:"Timer",en:"Timer"},stopwatch:{pt:"Cron√≥metro",en:"Stopwatch"},tasklist:{pt:"TaskList",en:"TaskList"},countdown:{pt:"Countdown",en:"Countdown"},worldClock:{pt:"World Clock",en:"World Clock"},pomodoroTitle:{pt:"Pomodoro Timer",en:"Pomodoro Timer"},timerTitle:{pt:"Timer",en:"Timer"},stopwatchTitle:{pt:"Cron√≥metro",en:"Stopwatch"},tasklistTitle:{pt:"Task List",en:"Task List"},countdownTitle:{pt:"Countdown",en:"Countdown"},worldclockTitle:{pt:"World Clock",en:"World Clock"},workMin:{pt:"Tempo de trabalho em minutos",en:"Work time in minutes"},breakMin:{pt:"Tempo de pausa em minutos",en:"Break time in minutes"},start:{pt:"Start",en:"Start"},stop:{pt:"Stop",en:"Stop"},reset:{pt:"Reset",en:"Reset"},add:{pt:"Add",en:"Add"},lap:{pt:"Lap",en:"Lap"},taskPlaceholder:{pt:"Adicionar nova tarefa...",en:"Add a new task..."},taskLabel:{pt:"Nova tarefa",en:"New task"},addTaskAria:{pt:"Adicionar tarefa",en:"Add task"},countdownLabelPlaceholder:{pt:"T√≠tulo (opcional)",en:"Title (optional)"},countdownLabelAria:{pt:"Nome do countdown",en:"Countdown name"},countdownDateAria:{pt:"Data e hora de destino",en:"Target date and time"},addCountdownAria:{pt:"Adicionar countdown",en:"Add countdown"},resetCountdownAria:{pt:"Resetar todos os countdowns",en:"Reset all countdowns"},timezoneAria:{pt:"Selecionar fuso hor√°rio",en:"Select timezone"},addTimezoneAria:{pt:"Adicionar fuso hor√°rio",en:"Add timezone"},minutes:{pt:"Minutos",en:"Minutes"},seconds:{pt:"Segundos",en:"Seconds"},timeRemaining:{pt:"Tempo restante",en:"Time remaining"},elapsed:{pt:"Tempo decorrido",en:"Elapsed time"},closePomodoro:{pt:"Fechar Pomodoro Timer",en:"Close Pomodoro Timer"},closeTimer:{pt:"Fechar Timer",en:"Close Timer"},closeStopwatch:{pt:"Fechar Cron√≥metro",en:"Close Stopwatch"},closeTasklist:{pt:"Fechar Lista de Tarefas",en:"Close Task List"},closeCountdown:{pt:"Fechar Contagem Regressiva",en:"Close Countdown"},closeWorldclock:{pt:"Fechar Rel√≥gio Mundial",en:"Close World Clock"},entrar:{pt:"Entrar",en:"Log in"},criarConta:{pt:"Criar conta",en:"Create account"},loginSubtitle:{pt:"Acesse sua conta para sincronizar suas configura√ß√µes.",en:"Access your account to sync your settings."},rememberMe:{pt:"Lembrar-me",en:"Remember me"},forgotPassword:{pt:"Forgot password?",en:"Forgot password?"},confirmPassword:{pt:"Confirmar password",en:"Confirm password"},showPassword:{pt:"Mostrar",en:"Show"},showPasswordAria:{pt:"Mostrar password",en:"Show password"},hidePassword:{pt:"Ocultar",en:"Hide"},hidePasswordAria:{pt:"Ocultar password",en:"Hide password"},hidePasswordConfirmAria:{pt:"Ocultar confirma√ß√£o de password",en:"Hide password confirmation"},orContinue:{pt:"ou continuar com",en:"or continue with"},showPasswordConfirmAria:{pt:"Mostrar confirma√ß√£o de password",en:"Show password confirmation"},signUp:{pt:"Criar conta",en:"Sign up"},noAccount:{pt:"Don't have an account?",en:"Don't have an account?"},connected:{pt:"Conectado",en:"Connected"},connectedMsg:{pt:"Voc√™ est√° conectado!",en:"You're connected!"},ok:{pt:"Ok",en:"Ok"},signOut:{pt:"Sair",en:"Sign out"},closeLogin:{pt:"Fechar Login",en:"Close Login"},footer:{pt:"¬© 2026 StuddyBuddy. Desenvolvido por Mariana Lima.",en:"¬© 2026 StuddyBuddy. Developed by Mariana Lima."},cookies:{pt:"Cookies",en:"Cookies"},cookieText:{pt:"Usamos cookies essenciais para o funcionamento do site e cookies de prefer√™ncia para guardar op√ß√µes como tema e som.",en:"We use essential cookies for site functionality and preference cookies to save options like theme and sound."},accept:{pt:"Aceitar",en:"Accept"},reject:{pt:"Recusar",en:"Reject"},shortcutsTitle:{pt:"Atalhos de teclado",en:"Keyboard shortcuts"},shortcutsCloseAria:{pt:"Fechar",en:"Close"},shortcutStopwatch:{pt:"Cron√≥metro",en:"Stopwatch"},shortcutTheme:{pt:"Alternar tema",en:"Toggle theme"},shortcutShortcuts:{pt:"Ver atalhos",en:"View shortcuts"},shortcutCloseCards:{pt:"Fechar cards",en:"Close cards"},langLabel:{pt:"Idioma",en:"Language"},langBtn:{pt:"üåê PT",en:"üåê EN"},langBtnAria:{pt:"Mudar idioma para Ingl√™s",en:"Change language to Portuguese"},account:{pt:"Conta",en:"Account"},statsTitle:{pt:"Estat√≠sticas de estudo",en:"Study statistics"},statsToday:{pt:"Hoje:",en:"Today:"},statsWeek:{pt:"√öltimos 7 dias:",en:"Last 7 days:"},statsTotal:{pt:"Total:",en:"Total:"},statsSessions:{pt:"Sess√µes:",en:"Sessions:"},pomoBreakTitle:{pt:"Pausa!",en:"Break time!"},pomoBreakBody:{pt:"Tempo de descanso. Aproveita para cuidar de ti!",en:"Time to rest. Take care of yourself!"},pomoReminderWater:{pt:"üíß Bebe √°gua",en:"üíß Drink water"},pomoReminderStretch:{pt:"ü§∏ Alonga-te",en:"ü§∏ Stretch"},pomoReminderEat:{pt:"üçé Come algo saud√°vel",en:"üçé Eat something healthy"},pomoBreakWellness:{pt:"Pausa! Bebe √°gua ‚Ä¢ Alonga-te ‚Ä¢ Come algo saud√°vel",en:"Break! Drink water ‚Ä¢ Stretch ‚Ä¢ Eat something healthy"},pomoWorkTitle:{pt:"Tempo de trabalho!",en:"Work time!"},pomoWorkBody:{pt:"Mant√©m o foco!",en:"Stay focused!"},pomoWorkToast:{pt:"Hora de trabalhar! Mant√©m o foco!",en:"Work time! Stay focused!"}};function ge(){if(Z==="en"||Z==="pt")return Z;try{const e=localStorage.getItem(Me);if(e==="en"||e==="pt")return e}catch{}return"pt"}function nt(e){if(!(e!=="pt"&&e!=="en")){Z=e;try{localStorage.setItem(Me,e)}catch{}}}function f(e,o=ge()){const t=ot[e];return t?t[o]??t.pt??"":""}function ce(){const e=ge();document.documentElement.lang=e==="pt"?"pt-PT":"en",document.querySelectorAll("[data-i18n]").forEach(t=>{const n=t.getAttribute("data-i18n");if(t.id==="loginButton"&&_e()){const r=Fe(x());t.textContent=r==="Conta"?f("account"):r,t.setAttribute("aria-label",`${f("account")}: ${x()}`);return}const a=f(n);a&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&(/^faq\dA$/.test(n)?t.innerHTML=a:t.textContent=a)}),document.querySelectorAll("[data-i18n-placeholder]").forEach(t=>{const n=t.getAttribute("data-i18n-placeholder");t.placeholder=f(n)}),document.querySelectorAll("[data-i18n-aria]").forEach(t=>{const n=t.getAttribute("data-i18n-aria"),a=f(n);a&&t.setAttribute("aria-label",a)});const o=document.getElementById("langBtn");o&&(o.textContent=e==="pt"?"üåê EN":"üåê PT",o.setAttribute("aria-label",f("langBtnAria"))),document.dispatchEvent(new CustomEvent("i18n-changed",{detail:{lang:e}}))}function st(){const e=ge()==="pt"?"en":"pt";nt(e),ce()}function Ct(){const e=document.getElementById("langBtn");e&&(e.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),st()}),ce(),document.addEventListener("login-success",ce))}const Oe="studdybuddy_study_stats";function De(){try{const e=localStorage.getItem(Oe);if(!e)return{sessions:[],totalMinutes:0};const o=JSON.parse(e);return{sessions:o.sessions||[],totalMinutes:o.totalMinutes||0}}catch{return{sessions:[],totalMinutes:0}}}function at(e,o){try{localStorage.setItem(Oe,JSON.stringify({sessions:e,totalMinutes:o}))}catch{}}function Lt(e){const{sessions:o,totalMinutes:t}=De(),n=new Date;o.push({date:n.toISOString().slice(0,10),minutes:e});const a=t+e;return at(o.slice(-500),a),window.dispatchEvent(new CustomEvent("studystats-updated")),a}function se(e){if(e<60)return`${e} min`;const o=Math.floor(e/60),t=e%60;return t?`${o}h ${t}min`:`${o}h`}function rt(e){const o=document.getElementById(e);if(!o)return;const{sessions:t,totalMinutes:n}=De(),a=new Date().toISOString().slice(0,10),r=t.filter(c=>c.date===a).reduce((c,p)=>c+p.minutes,0),s=new Date;s.setDate(s.getDate()-7);const d=t.filter(c=>c.date>=s.toISOString().slice(0,10)).reduce((c,p)=>c+p.minutes,0);o.innerHTML=`
    <div class="stats-box">
      <h4 class="stats-title">${f("statsTitle")}</h4>
      <div class="stats-row">
        <span>${f("statsToday")}</span>
        <strong>${se(r)}</strong>
      </div>
      <div class="stats-row">
        <span>${f("statsWeek")}</span>
        <strong>${se(d)}</strong>
      </div>
      <div class="stats-row">
        <span>${f("statsTotal")}</span>
        <strong>${se(n)}</strong>
      </div>
      <div class="stats-row">
        <span>${f("statsSessions")}</span>
        <strong>${t.length}</strong>
      </div>
    </div>
  `}const de="authToken",le="userEmail";function he(){try{return localStorage.getItem(de)}catch{return null}}function ye(e){try{e?localStorage.setItem(de,e):localStorage.removeItem(de)}catch{}}function x(){try{return localStorage.getItem(le)}catch{return null}}function Fe(e){const o=String(e||"").trim();return o?o.split("@")[0]||o:"Conta"}function we(e){try{e?localStorage.setItem(le,e):localStorage.removeItem(le)}catch{}}function Re(){ye(null),we(null)}function _e(){return!!he()}async function Ne(e,o={}){const t=he(),n=new Headers(o.headers||{});t&&n.set("Authorization",`Bearer ${t}`);const a=await fetch(e,{...o,headers:n});return a.status===401&&Re(),a}async function it({email:e,password:o,rememberMe:t}){const n=String(e||"").trim().toLowerCase(),a=String(o||"");if(!n)throw new Error("Email √© obrigat√≥rio");if(!a)throw new Error("Password √© obrigat√≥ria");const r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a,rememberMe:!!t})});if(!r.ok){let d=`Erro HTTP ${r.status}`;try{const c=await r.json();c?.message&&(d=c.message)}catch{}throw new Error(d)}const s=await r.json();if(!s?.token)throw new Error("Resposta de login inv√°lida (token em falta)");return ye(s.token),we(s?.user?.email||n),s}async function ct({email:e,password:o}){const t=String(e||"").trim().toLowerCase(),n=String(o||"");if(!t)throw new Error("Email √© obrigat√≥rio");if(!n||n.length<8)throw new Error("Password deve ter pelo menos 8 caracteres");const a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})});if(!a.ok){let s=`Erro HTTP ${a.status}`;try{const d=await a.json();d?.message&&(s=d.message)}catch{}throw new Error(s)}const r=await a.json();if(!r?.token)throw new Error("Resposta de registo inv√°lida (token em falta)");return ye(r.token),we(r?.user?.email||t),r}async function dt(e){const o=String(e||"").trim().toLowerCase();if(!o)throw new Error("Email √© obrigat√≥rio");const t=await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})});if(!t.ok){let n=`Erro HTTP ${t.status}`;try{const a=await t.json();a?.message&&(n=a.message)}catch{}throw new Error(n)}return await t.json()}async function lt({token:e,password:o}){const t=String(e||"").trim(),n=String(o||"");if(!t)throw new Error("Token √© obrigat√≥rio");if(!n||n.length<8)throw new Error("Password deve ter pelo menos 8 caracteres");const a=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,password:n})});if(!a.ok){let r=`Erro HTTP ${a.status}`;try{const s=await a.json();s?.message&&(r=s.message)}catch{}throw new Error(r)}return await a.json()}async function Tt(){const o=`userSettings:${x()||"anon"}`;try{const t=await Ne("/api/user/settings");if(!t.ok){let a=`Erro HTTP ${t.status}`;try{const r=await t.json();r?.message&&(a=r.message)}catch{}throw new Error(a)}const n=await t.json();try{await re("dados",{_id:o,...n||{}})}catch(a){console.warn("Failed to cache user settings:",a)}return n}catch(t){const n=await xe("dados",o).catch(()=>null);if(n){const{_id:a,...r}=n;return r}throw t}}async function ut(e){const o=e||{};let t;try{t=await Ne("/api/user/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})}catch{const c=`userSettings:${x()||"anon"}`,g={...await xe("dados",c).catch(()=>null)||{},...o};try{await re("dados",{_id:c,...g})}catch(m){console.warn("Failed to save offline settings:",m)}const b=he();if(b)try{await Ze({type:"PUT",url:"/api/user/settings",body:o,headers:{Authorization:`Bearer ${b}`}}),await Je()}catch(m){console.warn("Failed to register background sync:",m)}return g}if(!t.ok){let s=`Erro HTTP ${t.status}`;try{const d=await t.json();d?.message&&(s=d.message)}catch{}throw new Error(s)}const n=await t.json(),r=`userSettings:${x()||"anon"}`;try{await re("dados",{_id:r,...n||{}})}catch(s){console.warn("Failed to cache user settings:",s)}return n}const ue="cookieConsent";function mt(){try{return localStorage.getItem(ue)}catch{return null}}function Ie(e){try{e?localStorage.setItem(ue,e):localStorage.removeItem(ue)}catch{}}function It(){const e=document.getElementById("cookieBanner"),o=document.getElementById("cookieAccept"),t=document.getElementById("cookieReject");if(!e||!o||!t)return;const n=()=>{e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),o.focus()},a=()=>{e.classList.add("hidden"),e.setAttribute("aria-hidden","true")};mt()?a():n(),o.addEventListener("click",s=>{s.stopPropagation(),Ie("accepted"),a()}),t.addEventListener("click",s=>{s.stopPropagation(),Ie("rejected"),a()})}function ee(e){return e?Array.from(e.querySelectorAll(["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'].join(","))).filter(o=>{const t=window.getComputedStyle(o);return t.visibility!=="hidden"&&t.display!=="none"}):[]}function X(e,o){e&&e.setAttribute("aria-expanded",o?"true":"false")}function h(e,o){e&&(o?(e.setAttribute("hidden",""),e.setAttribute("inert","")):(e.removeAttribute("hidden"),e.removeAttribute("inert")))}let G=null,Q=null;function Pt(){G&&document.removeEventListener("click",G),G=e=>{e.target.closest(".card-close")||e.target.closest(".dropdown-close")||e.target.closest(".login-popup-close")||e.target.closest("#muteToggle")||e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||e.target.tagName==="SELECT"||e.target.closest("input")||e.target.closest("textarea")||e.target.closest("select")||E("click")},document.addEventListener("click",G,{passive:!0}),console.info("üîä Global click sound initialized (CLICK.mp3 on all clicks)")}function Bt(){Q&&document.removeEventListener("focusin",Q);const e=o=>{if(!o||o.disabled||o.readOnly)return!1;if(o.tagName==="TEXTAREA"||o.tagName==="SELECT")return!0;if(o.tagName!=="INPUT")return!1;const t=(o.getAttribute("type")||"text").toLowerCase();return!["checkbox","radio","button","submit","reset","range","color","file","hidden"].includes(t)};Q=o=>{const t=o.target;e(t)&&E("interact")},document.addEventListener("focusin",Q,{passive:!0}),console.info("üîä Global input focus sound initialized (INTERACT on focus)")}let B=null,qe=0,$e=0,Ke=0,ze=0,z=!1;const Pe=5,He=900,pt=995;let N=He;function ae(e){e&&(N+=1,N>pt&&(N=He,Array.from(document.querySelectorAll(".card:not(.hidden)")).forEach(t=>{N+=1,t.style.zIndex=String(N)})),e.style.zIndex=String(N))}function xt(){document.querySelectorAll(".card").forEach(e=>{e.addEventListener("pointerdown",()=>ae(e),{passive:!0}),e.addEventListener("focusin",()=>ae(e),{passive:!0}),e.addEventListener("pointerdown",o=>{if(o.target.closest(".card-close")||o.target.closest("button")||o.target.tagName==="INPUT"||o.target.tagName==="TEXTAREA"||o.target.tagName==="SELECT"||o.target.closest("input")||o.target.closest("textarea")||o.target.closest("select"))return;const t=e.getBoundingClientRect(),n=28;if(!(o.clientX>=t.right-n&&o.clientY>=t.bottom-n)){if(B=e,ae(e),qe=o.clientX,$e=o.clientY,Ke=e.offsetLeft,ze=e.offsetTop,z=!1,o.preventDefault(),document.body.style.userSelect="none",o.pointerId&&e.setPointerCapture)try{e.setPointerCapture(o.pointerId)}catch{}document.addEventListener("pointermove",We),document.addEventListener("pointerup",je)}})})}function We(e){if(!B)return;const o=e.clientX-qe,t=e.clientY-$e;!z&&(Math.abs(o)>Pe||Math.abs(t)>Pe)&&(z=!0),z&&(B.style.left=Ke+o+"px",B.style.top=ze+t+"px")}function je(e){if(B){if(e.pointerId&&B.releasePointerCapture)try{B.releasePointerCapture(e.pointerId)}catch{}B=null,z=!1,document.removeEventListener("pointermove",We),document.removeEventListener("pointerup",je),document.body.style.userSelect=""}}function Mt(){const e=document.querySelector(".navbar-toggle"),o=document.getElementById("navbar-menu")||document.querySelector(".navbar-menu");if(!e||!o)return;const t=window.matchMedia("(max-width: 1300px)"),n=()=>{const s=t.matches,d=o.classList.contains("open");if(!s){o.classList.remove("open"),e.classList.remove("is-open"),h(o,!1),X(e,!1);return}h(o,!d),X(e,d),e.classList.toggle("is-open",d)};n();const a=()=>{if(!t.matches)return;o.classList.add("open"),e.classList.add("is-open"),h(o,!1),X(e,!0);const s=ee(o);s[0]&&s[0].focus()},r=()=>{t.matches&&(o.classList.remove("open"),e.classList.remove("is-open"),h(o,!0),X(e,!1),e.focus())};e.addEventListener("click",s=>{s.stopPropagation(),o.classList.contains("open")?r():a()}),document.addEventListener("click",s=>{!o.contains(s.target)&&!e.contains(s.target)&&o.classList.contains("open")&&r()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&o.classList.contains("open")&&r()});try{t.addEventListener("change",n)}catch{t.addListener(n)}window.addEventListener("resize",()=>n(),{passive:!0})}function Ot(e,o){const t=document.getElementById(e),n=document.getElementById(o);if(!t||!n)return;const a=!n.classList.contains("hidden");t.setAttribute("aria-pressed",a?"true":"false"),h(n,!a);const r=()=>{t.classList.add("pressed"),t.setAttribute("aria-pressed","true"),n.classList.remove("hidden"),h(n,!1),E("open");const c=n.querySelector(".card-close");if(c)c.focus();else{const p=ee(n);p[0]&&p[0].focus()}},s=({returnFocus:c=!0}={})=>{t.classList.remove("pressed"),t.setAttribute("aria-pressed","false"),n.classList.add("hidden"),h(n,!0),c&&t.focus()};t.addEventListener("click",()=>{!n.classList.contains("hidden")?s({returnFocus:!1}):r()});const d=n.querySelector(".card-close");d&&d.addEventListener("click",c=>{c.stopPropagation(),E("close"),s({returnFocus:!0})})}function Dt(){const e=document.getElementById("loginButton"),o=document.getElementById("loginPopup"),t=document.getElementById("loginPopupClose"),n=document.getElementById("loginForm"),a=document.getElementById("loginFormView"),r=document.getElementById("resetPasswordView"),s=document.getElementById("resetBackBtn"),d=document.getElementById("resetPasswordForm"),c=document.getElementById("resetEmail"),p=document.getElementById("resetRequestBtn"),g=document.getElementById("resetToken"),b=document.getElementById("resetNewPassword"),m=document.getElementById("resetNewPasswordConfirm"),y=document.getElementById("resetSubmitBtn"),S=document.getElementById("loginConnectedView"),T=document.getElementById("loginConnectedMessage"),H=document.getElementById("loginConnectedOk"),ve=document.getElementById("signOutBtn"),I=document.getElementById("loginPassword"),k=document.getElementById("togglePassword"),W=document.getElementById("loginPasswordConfirm"),Ee=document.getElementById("confirmPasswordGroup"),$=document.getElementById("togglePasswordConfirm");document.getElementById("rememberMe");const be=o.querySelector(".login-options"),Ae=o.querySelector(".forgot-password"),Se=document.getElementById("login-title"),ke=document.getElementById("loginSubtitle"),D=document.getElementById("loginSubmitBtn"),M=document.getElementById("authTabLogin"),O=document.getElementById("authTabSignup");if(!e||!o)return;let F=!1,j=null,te="login";const R=i=>{te=i==="signup"?"signup":"login";const l=te==="signup";M&&(M.classList.toggle("is-active",!l),M.setAttribute("aria-selected",l?"false":"true")),O&&(O.classList.toggle("is-active",l),O.setAttribute("aria-selected",l?"true":"false")),Ee&&Ee.classList.toggle("hidden",!l),be&&be.classList.toggle("hidden",l),Se&&(Se.textContent=l?"Criar conta":"Entrar"),ke&&(ke.textContent=l?"Crie sua conta para sincronizar tema e som.":"Acesse sua conta para sincronizar suas configura√ß√µes."),D&&(D.textContent=l?"Criar conta":"Entrar"),I&&I.setAttribute("autocomplete",l?"new-password":"current-password")},Ce=i=>{if(a&&a.classList.add("hidden"),r&&r.classList.add("hidden"),S&&S.classList.remove("hidden"),T){const l=String(i||"").trim();T.textContent=l?`Voc√™ (${l}) est√° conectado!`:"Voc√™ est√° conectado!"}H?H.focus():t&&t.focus()},U=()=>{S&&S.classList.add("hidden"),r&&r.classList.add("hidden"),a&&a.classList.remove("hidden")},Xe=()=>{if(S&&S.classList.add("hidden"),a&&a.classList.add("hidden"),r&&r.classList.remove("hidden"),M&&M.classList.remove("is-active"),O&&O.classList.remove("is-active"),c){const i=x();i&&!c.value&&(c.value=i);try{c.focus()}catch{}}},Ge=i=>{if(!F||i.key!=="Tab")return;const l=ee(o);if(!l.length)return;const u=l[0],v=l[l.length-1],A=document.activeElement;i.shiftKey?(A===u||!o.contains(A))&&(i.preventDefault(),v.focus()):A===v&&(i.preventDefault(),u.focus())},Qe=()=>{if(F=!0,j=document.activeElement,o.classList.remove("hidden"),h(o,!1),e.setAttribute("aria-expanded","true"),E("open"),_e()){const u=x();Ce(u);return}U(),R("login");const i=document.getElementById("loginEmail"),l=x();i&&l&&!i.value&&(i.value=l),i&&i.focus()},_=()=>{F=!1,o.classList.add("hidden"),h(o,!0),e.setAttribute("aria-expanded","false"),E("close"),I&&(I.type="password"),k&&(k.setAttribute("aria-pressed","false"),k.setAttribute("aria-label",f("showPasswordAria")),k.textContent=f("showPassword")),j&&typeof j.focus=="function"?j.focus():e.focus()};e.addEventListener("click",i=>{i.stopPropagation(),E("click"),F?_():Qe()}),t&&t.addEventListener("click",i=>{i.stopPropagation(),_()}),n&&n.addEventListener("submit",async i=>{i.preventDefault();const l=document.getElementById("loginEmail")?.value,u=document.getElementById("loginPassword")?.value,v=document.getElementById("loginPasswordConfirm")?.value,A=!!document.getElementById("rememberMe")?.checked;D&&(D.disabled=!0);try{const P=te==="signup";if(P&&(!v||String(v)!==String(u||"")))throw new Error("As passwords n√£o coincidem");const K=P?await ct({email:l,password:u}):await it({email:l,password:u,rememberMe:A});E("login");const V=K?.user?.email||String(l||"").trim();V&&(e.textContent=Fe(V),e.setAttribute("aria-label",`Conta: ${V}`),document.dispatchEvent(new CustomEvent("login-success"))),w("Sess√£o iniciada.","success",2e3);const oe=(()=>{try{return localStorage.getItem("theme")}catch{return null}})(),Le=(()=>{try{return localStorage.getItem("soundMuted")==="true"}catch{return}})(),Y={};if((oe==="dark"||oe==="light")&&(Y.theme=oe),typeof Le<"u"&&(Y.soundMuted=Le),Object.keys(Y).length)try{await ut(Y)}catch{}Ce(V)}catch(P){console.error("Login failed:",P),w(P?.message||"Falha ao iniciar sess√£o","error",4e3)}finally{D&&(D.disabled=!1)}}),Ae&&Ae.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),Xe()}),s&&s.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),U(),R("login"),document.getElementById("loginEmail")?.focus()}),p&&p.addEventListener("click",async i=>{i.preventDefault(),i.stopPropagation();const l=c?.value;if(!l){w("Email √© obrigat√≥rio","warning",2500),c?.focus();return}p&&(p.disabled=!0);try{const u=await dt(l);w(u?.message||"Pedido enviado.","success",3500);const v=u?.dev?.token;v&&g&&!g.value?(g.value=v,w("Token preenchido automaticamente (modo dev).","info",2500),b?.focus()):g?.focus()}catch(u){console.error("Request reset failed:",u),w(u?.message||"Falha ao pedir token","error",3500)}finally{p&&(p.disabled=!1)}}),d&&d.addEventListener("submit",async i=>{i.preventDefault();const l=g?.value,u=b?.value,v=m?.value;if(!l){w("Token √© obrigat√≥rio","warning",2500),g?.focus();return}if(!u||String(u).length<8){w("A nova password deve ter pelo menos 8 caracteres","warning",3e3),b?.focus();return}if(String(u)!==String(v||"")){w("As passwords n√£o coincidem","warning",3e3),m?.focus();return}y&&(y.disabled=!0);try{const A=await lt({token:l,password:u});w(A?.message||"Password atualizada.","success",3500);const P=String(c?.value||"").trim();U(),R("login");const K=document.getElementById("loginEmail");K&&P&&!K.value&&(K.value=P),document.getElementById("loginPassword")?.focus(),g&&(g.value=""),b&&(b.value=""),m&&(m.value="")}catch(A){console.error("Reset password failed:",A),w(A?.message||"Falha ao redefinir password","error",3500)}finally{y&&(y.disabled=!1)}}),k&&I&&k.addEventListener("click",i=>{i.stopPropagation();const u=!(I.type==="text");I.type=u?"text":"password",k.setAttribute("aria-pressed",u?"true":"false"),k.setAttribute("aria-label",f(u?"hidePasswordAria":"showPasswordAria")),k.textContent=f(u?"hidePassword":"showPassword");try{I.focus()}catch{}}),$&&W&&$.addEventListener("click",i=>{i.stopPropagation();const u=!(W.type==="text");W.type=u?"text":"password",$.setAttribute("aria-pressed",u?"true":"false"),$.setAttribute("aria-label",f(u?"hidePasswordConfirmAria":"showPasswordConfirmAria")),$.textContent=f(u?"hidePassword":"showPassword");try{W.focus()}catch{}}),M&&M.addEventListener("click",i=>{i.stopPropagation(),R("login"),document.getElementById("loginEmail")?.focus()}),O&&O.addEventListener("click",i=>{i.stopPropagation(),R("signup"),document.getElementById("loginEmail")?.focus()}),H&&H.addEventListener("click",i=>{i.stopPropagation(),_()}),ve&&ve.addEventListener("click",i=>{i.stopPropagation(),Re(),e.textContent=f("login"),e.setAttribute("aria-label",f("login")),w("Sess√£o terminada.","info",2e3),U(),R("login"),_()}),document.addEventListener("click",i=>{F&&!o.contains(i.target)&&!e.contains(i.target)&&_()}),document.addEventListener("keydown",i=>{i.key==="Escape"&&F&&_()}),document.addEventListener("keydown",Ge)}let C=null;function ft(){return C||(C=document.createElement("div"),C.id="notification-container",C.setAttribute("role","alert"),C.setAttribute("aria-live","polite"),C.style.cssText=`
    position: fixed;
    bottom: max(80px, calc(env(safe-area-inset-bottom, 0) + 92px));
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    z-index: 9999;
    pointer-events: none;
  `,document.body.appendChild(C),C)}const gt=2e3;let Ue=!0;setTimeout(()=>{Ue=!1},gt);const Be={success:"var(--success)",warning:"var(--warning)",error:"var(--danger)",info:"var(--primary)"};function me(e,{direction:o="down",immediate:t=!1}={}){if(!e||e.dataset.dismissed==="true")return;e.dataset.dismissed="true";const n=()=>e.remove();if(t)return n();const a=o==="left"?-1:o==="right"?1:0,r=a?`translate3d(${a*120}%, 0, 0)`:"translate3d(0, 20px, 0)";e.style.transition="transform 0.22s ease, opacity 0.22s ease",e.style.opacity="0",e.style.transform=r,setTimeout(n,240)}function ht(e,{onDismiss:o}={}){if(!e)return;let t=0,n=0,a=0,r=!1,s=null,d=!1;const c=m=>{if(!(m.pointerType==="mouse"&&m.button!==0)){s=m.pointerId,d=!1,r=!1,t=m.clientX,n=m.clientY,a=m.clientX,e.style.willChange="transform, opacity";try{e.setPointerCapture(s)}catch{}}},p=m=>{if(s===null||m.pointerId!==s)return;const y=m.clientX-t,S=m.clientY-n;if(a=m.clientX,!r){if(Math.abs(y)<8||Math.abs(y)<=Math.abs(S)+6)return;r=!0}d=!0,e.style.transition="none",e.style.transform=`translate3d(${y}px, 0, 0)`;const T=Math.min(.65,Math.abs(y)/320);e.style.opacity=String(1-T),m.preventDefault()},g=m=>{if(s===null||m.pointerId!==s)return;try{e.releasePointerCapture(s)}catch{}if(s=null,!r)return;const y=a-t;if(Math.abs(y)>90){const T=y<0?"left":"right";o?.(T),me(e,{direction:T});return}e.style.transition="transform 0.2s ease, opacity 0.2s ease",e.style.opacity="1",e.style.transform="translate3d(0, 0, 0)",setTimeout(()=>{e.style.willChange=""},220)},b=()=>{s=null,e.style.transition="transform 0.2s ease, opacity 0.2s ease",e.style.opacity="1",e.style.transform="translate3d(0, 0, 0)",setTimeout(()=>{e.style.willChange=""},220)};e.addEventListener("pointerdown",c),e.addEventListener("pointermove",p),e.addEventListener("pointerup",g),e.addEventListener("pointercancel",b),e.addEventListener("click",m=>{d&&(m.preventDefault(),m.stopPropagation())},{capture:!0})}function w(e,o="success",t=3e3,n=!0){n&&!Ue&&E("notification");const a=ft(),r=document.createElement("div");r.className=`notification notification-${o}`,r.textContent=e,r.setAttribute("role","alert"),r.dataset.dismissed="false",r.style.cssText=`
    background-color: ${Be[o]||Be.success};
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    opacity: 0;
    transform: translate3d(0, 20px, 0);
    transition: opacity 0.3s ease, transform 0.3s ease;
    pointer-events: auto;
    max-width: min(92vw, 520px);
    text-align: center;
    touch-action: pan-y;
  `,a.appendChild(r);let s=null;const d=()=>{t<=0||(s=setTimeout(()=>{me(r,{direction:"down"})},t))},c=()=>{s&&clearTimeout(s),s=null};ht(r,{onDismiss:()=>c()}),requestAnimationFrame(()=>{r.style.opacity="1",r.style.transform="translate3d(0, 0, 0)"}),r.addEventListener("click",p=>{p.stopPropagation(),c(),me(r,{direction:"down"})}),d()}function Ft(e,o="success",t=5e3){w(e,o,t,!1)}function Rt(){document.addEventListener("keydown",e=>{if(!(e.target&&(e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||e.target.tagName==="SELECT")&&e.key!=="Escape")){if((e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="P"&&(e.preventDefault(),q("pomodoroButton","pomodoroCard")),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="T"&&(e.preventDefault(),q("timerButton","timerCard")),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="L"&&(e.preventDefault(),q("tasklistButton","tasklistCard")),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="C"&&(e.preventDefault(),q("countdownButton","countdownCard")),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="W"&&(e.preventDefault(),q("worldClockButton","worldClockCard")),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="S"&&(e.preventDefault(),q("stopwatchButton","stopwatchCard")),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="?"&&(e.preventDefault(),Ve()),(e.ctrlKey||e.metaKey)&&e.shiftKey&&e.key==="D"){e.preventDefault();const t=document.querySelector("theme-toggle");t&&typeof t.toggleTheme=="function"&&t.toggleTheme()}if(e.key==="Escape"){const t=document.getElementById("shortcutsModal");t&&!t.classList.contains("hidden")?(Ye(),document.getElementById("shortcutsBtn")?.focus()):yt()}}})}function Ve(){const e=document.getElementById("shortcutsModal");e&&(e.classList.remove("hidden"),e.setAttribute("aria-hidden","false"),document.getElementById("shortcutsClose")?.focus())}function Ye(){const e=document.getElementById("shortcutsModal");e&&(e.classList.add("hidden"),e.setAttribute("aria-hidden","true"))}function q(e,o){const t=document.getElementById(e),n=document.getElementById(o);!t||!n||t.click()}function yt(){const e=document.querySelectorAll(".card:not(.hidden)"),o=document.querySelectorAll("#buttonContainer button.pressed");e.forEach(t=>{t.classList.add("hidden"),h(t,!0)}),o.forEach(t=>{t.classList.remove("pressed"),t.setAttribute("aria-pressed","false")})}function _t(){const e=document.querySelectorAll(".navbar-dropdown-btn"),o=document.querySelectorAll(".navbar-dropdown");let t=null;o.forEach(s=>{h(s,s.classList.contains("hidden"))});const n=({returnFocus:s=!1}={})=>{o.forEach(d=>{d.classList.add("hidden"),h(d,!0)}),e.forEach(d=>{d.classList.remove("active"),d.setAttribute("aria-expanded","false")}),s&&t&&(t.focus(),t=null)},a=s=>{const d=s.getAttribute("data-dropdown"),c=document.getElementById(`dropdown-${d}`);if(!c)return;const p=!c.classList.contains("hidden");if(n({returnFocus:!1}),!p){c.classList.remove("hidden"),s.classList.add("active"),s.setAttribute("aria-expanded","true"),h(c,!1),t=s,d==="configuracoes"&&rt("sidebarStats");const g=ee(c);g[0]&&g[0].focus()}};e.forEach(s=>{s.addEventListener("click",d=>{d.stopPropagation(),a(s),E("open")})}),document.querySelectorAll(".dropdown-close").forEach(s=>{s.addEventListener("click",d=>{d.stopPropagation(),E("close");const c=s.closest(".navbar-dropdown"),p=c?document.querySelector(`.navbar-dropdown-btn[data-dropdown="${c.id.replace("dropdown-","")}"]`):null;c&&(c.classList.add("hidden"),h(c,!0)),p&&(p.classList.remove("active"),p.setAttribute("aria-expanded","false"),p.focus())})}),document.addEventListener("click",s=>{!s.target.closest(".navbar-dropdown")&&!s.target.closest(".navbar-dropdown-btn")&&n({returnFocus:!1})}),document.addEventListener("keydown",s=>{s.key==="Escape"&&n({returnFocus:!0})})}function Nt(){const e=document.getElementById("focusModeBtn"),o=document.getElementById("focusModeExit"),t=document.querySelector(".navbar"),n=document.getElementById("leftSidebar"),a=document.getElementById("buttonContainer"),r=document.querySelector("footer");if(!e||!t)return;const s=()=>{document.body.classList.remove("focus-mode"),t?.classList.remove("hidden"),n?.classList.remove("hidden"),a&&a.classList.remove("hidden"),r?.classList.remove("hidden"),e?.setAttribute("aria-pressed","false"),e.textContent="Modo foco",o?.classList.add("hidden")},d=()=>{document.body.classList.add("focus-mode"),t?.classList.add("hidden"),n?.classList.add("hidden"),a&&a.classList.add("hidden"),r?.classList.add("hidden"),e.setAttribute("aria-pressed","true"),e.textContent="Modo foco (ativo)",o?.classList.remove("hidden")};e.addEventListener("click",()=>{e.getAttribute("aria-pressed")==="true"?s():d()}),o?.addEventListener("click",s)}function qt(){const e=document.getElementById("shortcutsModal"),o=document.getElementById("shortcutsBtn"),t=document.getElementById("shortcutsClose");if(!e||!t)return;const n=()=>{Ye(),o?.focus()};o?.addEventListener("click",()=>Ve()),t.addEventListener("click",n),e.addEventListener("click",a=>{a.target===e&&n()})}export{Ot as A,he as B,rt as C,bt as a,Ft as b,Tt as c,kt as d,xt as e,Fe as f,x as g,Mt as h,_e as i,Dt as j,_t as k,Rt as l,Nt as m,qt as n,It as o,E as p,Ct as q,Lt as r,w as s,f as t,Et as u,Pt as v,Bt as w,St as x,At as y,ut as z};
